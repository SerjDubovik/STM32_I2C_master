#include "stm32f10x.h"
#include "GPIO.h"
			

int main(void)
{

	init_GPIO();

    relay_1(off);
    relay_2(off);

    blue_led(off);
    red_led(off);



    // настройка I2C1

    RCC->APB1ENR |=	RCC_APB1ENR_I2C1EN;		// Тактируем модуль I2C1

    I2C1->CR1 &= ~I2C_CR1_SMBUS;			// настраиваем модуль в режим I2C
    I2C2->CR2 &= ~I2C_CR2_FREQ;
    I2C1->CR2 |= 36;                    	// Установим частоту. Половина тактовой APB1= 36MHz
    I2C1->CCR = 180;                    	// 100 KHz
    I2C1->TRISE = 37;





	for(;;)
	{


	} // скобка бесконечного цикла

} // скобка мейна
